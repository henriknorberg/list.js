var cc = require('./couchClient');

var manager = function(port,host,dbname)
{
	this.couchClient = new cc.Client(port,host,dbname);
	
	this.GetDocuments = function(callback)
	{
		this.couchClient.GetAll(function(data)
		{
			data = JSON.parse(data);
		
			var docs = [];
			for(var i = 0; i < data.rows.length; i++)
			{
				docs[i] = data.rows[i].doc;
			}
			callback(docs);
		});
	};
	this.GetLists = function(callback)
	{
		this.couchClient.GetAll(function(data)
		{
			data = JSON.parse(data);
			var lists = [];
			for(var i = 0; i < data.rows.length; i++)
			{
				lists[i] = data.rows[i].doc;
			}
			callback(lists);
		});
	};
};

exports.Manager = manager;
